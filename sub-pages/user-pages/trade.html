<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Session | BoostInvest</title>
    <link rel="stylesheet" href="./css/styles.css"> 
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        body { padding-bottom: 80px; background-color: #0f172a; color: #fff; } /* Darker theme for trading */

        /* --- Session Status Header --- */
        .session-info {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .session-time { color: var(--accent-color); font-weight: 700; }
        .status-indicator { display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin-right: 5px; }
        .status-online { background: #22c55e; box-shadow: 0 0 10px #22c55e; }
        .status-offline { background: #ef4444; }

        /* --- Trading Area --- */
        .trade-container {
            margin-top: 30px;
            text-align: center;
            min-height: 400px;
        }

        .countdown-display {
            font-size: 4rem;
            font-weight: 700;
            font-family: monospace;
            color: var(--accent-color);
            margin: 20px 0;
            display: none;
        }

        .trade-message { font-size: 1.2rem; margin-bottom: 20px; display: none; color: #22c55e; }

        /* --- Assignment Config Cards --- */
        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 30px 0;
            display: none; /* Shown after Trade In */
        }

        .config-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .config-item label { display: block; font-size: 0.7rem; text-transform: uppercase; opacity: 0.6; margin-bottom: 5px; }
        .config-item select, .config-item p { 
            background: transparent; 
            color: #fff; 
            border: none; 
            font-weight: 600; 
            font-size: 1.1rem; 
            text-align: center;
            width: 100%;
            outline: none;
        }

        /* --- Controls --- */
        .trade-btn {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 20px 60px;
            border-radius: 50px;
            font-size: 1.5rem;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(0, 112, 243, 0.4);
            transition: 0.3s;
        }

        .trade-btn:disabled { background: #444; cursor: not-allowed; box-shadow: none; }

        /* --- Result Modal --- */
        #result-display {
            padding: 30px;
            border-radius: 20px;
            margin-top: 20px;
            display: none;
        }
        .win { background: rgba(34, 197, 94, 0.2); border: 1px solid #22c55e; color: #22c55e; }
        .loss { background: rgba(239, 68, 68, 0.2); border: 1px solid #ef4444; color: #ef4444; }

        @media (max-width: 600px) {
            .countdown-display { font-size: 3rem; }
        }
    </style>
</head>
<body>

       <header class="main-header">
        <div class="container header-content">
               <div class="logo-name">
            <img src="../logo.png" alt="main-logo" width="35px">
            <h1 class="logo">BoostInvest</h1>
            </div>
        
            <div class="auth-buttons">
                <a href="#" class="btn btn-signin">Log Out</a>
            </div>
        </div>
    </header>

    <main class="container">
        
        <section class="session-info">
            <h3><span class="status-indicator status-online" id="status-dot"></span> Live Market Session</h3>
            <p>Next Sessions (UTC+3): <span class="session-time">14:00‚Äì14:10</span> & <span class="session-time">17:00‚Äì17:10</span></p>
            <p id="current-time-msg" style="font-size: 0.8rem; margin-top: 10px; opacity: 0.7;"></p>
        </section>

        <section class="trade-container">
            
            <div id="setup-view">
                <i class="fas fa-chart-line" style="font-size: 4rem; color: var(--accent-color); margin-bottom: 20px;"></i>
                <h2>Ready to Start?</h2>
                <p style="margin-bottom: 30px; opacity: 0.8;">Tap the button during session hours to enter the trade.</p>
                <button class="trade-btn" id="trade-in-btn" onclick="startTrade()">TRADE IN</button>
            </div>

            <div id="trading-view">
                <p class="trade-message" id="trade-msg">You are now in trade.</p>
                <div class="countdown-display" id="timer">05:00</div>

                <div class="config-grid" id="config-panel">
                    <div class="config-item">
                        <label>Asset Pair</label>
                        <select id="user-pair">
                            <option value="BTC/USDT">BTC/USDT</option>
                            <option value="ETH/USDT">ETH/USDT</option>
                            <option value="SOL/USDT">SOL/USDT</option>
                        </select>
                    </div>
                    <div class="config-item">
                        <label>Trade Type</label>
                        <select id="user-type">
                            <option value="BUY/LONG">BUY/LONG</option>
                            <option value="SELL/SHORT">SELL/SHORT</option>
                        </select>
                    </div>
                    <div class="config-item">
                        <label>Timeframe</label>
                        <select id="user-timeframe">
                            <option value="5M">5M</option>
                            <option value="1M">1M</option>
                            <option value="15M">15M</option>
                        </select>
                    </div>
                </div>
                <p style="font-size: 0.8rem; opacity: 0.5;">System signal assigned. You can override selections before time ends.</p>
            </div>

            <div id="result-display">
                <h2 id="result-title"></h2>
                <p id="result-text"></p>
                <button class="btn btn-primary" onclick="location.reload()" style="margin-top: 20px;">Return to Lobby</button>
            </div>

        </section>

    </main>

    <nav class="mobile-bottom-nav">
        <div class="nav-item"><a href="../user-dashbourd.html"><i class="fas fa-home"></i><span>Home</span></a></div>
        <div class="nav-item"><a href="./trade.html" class="active"><i class="fas fa-chart-line"></i><span>Trade</span></a></div>
        <div class="nav-item"><a href="./teams.html"><i class="fas fa-user-friends"></i><span>Teams</span></a></div>
        <div class="nav-item"><a href="./account.html"><i class="fas fa-user-circle"></i><span>Account</span></a></div>
    </nav>

    <script>
        // System Assigned Config (The Secret Winning Combination)
        const systemConfig = {
            pair: "BTC/USDT",
            type: "BUY/LONG",
            timeframe: "5M"
        };

        function startTrade() {
            // 1. UI Transitions
            document.getElementById('setup-view').style.display = 'none';
            document.getElementById('trading-view').style.display = 'block';
            document.getElementById('trade-msg').style.display = 'block';
            document.getElementById('timer').style.display = 'block';
            document.getElementById('config-panel').style.display = 'grid';

            // 2. Set Default Values (The System Signal)
            document.getElementById('user-pair').value = systemConfig.pair;
            document.getElementById('user-type').value = systemConfig.type;
            document.getElementById('user-timeframe').value = systemConfig.timeframe;

            // 3. Start 5 Minute Countdown (300 seconds)
            let timeLeft = 300; 
            const timerElement = document.getElementById('timer');

            const countdown = setInterval(() => {
                let minutes = Math.floor(timeLeft / 60);
                let seconds = timeLeft % 60;
                
                seconds = seconds < 10 ? '0' + seconds : seconds;
                timerElement.innerHTML = `0${minutes}:${seconds}`;

                if (timeLeft <= 0) {
                    clearInterval(countdown);
                    processResult();
                }
                timeLeft--;
            }, 1000);
        }

        function processResult() {
            document.getElementById('trading-view').style.display = 'none';
            const resultDisplay = document.getElementById('result-display');
            const resultTitle = document.getElementById('result-title');
            const resultText = document.getElementById('result-text');

            // Match Logic
            const userPair = document.getElementById('user-pair').value;
            const userType = document.getElementById('user-type').value;
            const userTime = document.getElementById('user-timeframe').value;

            const isMatch = (userPair === systemConfig.pair && userType === systemConfig.type && userTime === systemConfig.timeframe);

            resultDisplay.style.display = 'block';

            if (isMatch) {
                resultDisplay.className = 'win';
                resultTitle.innerHTML = "üèÜ TRADE WIN!";
                resultText.innerHTML = "Config matched session signal. <strong>+1%</strong> has been added to your balance.";
            } else {
                resultDisplay.className = 'loss';
                resultTitle.innerHTML = "‚ùå TRADE LOSS";
                resultText.innerHTML = "Config did not match session signal. <strong>-1%</strong> has been deducted.";
            }
        }

        // Simple Session Check (Simulation)
        function checkSession() {
            const now = new Date();
            const hours = now.getUTCHours() + 3; // UTC+3
            const mins = now.getUTCMinutes();
            
            const msg = document.getElementById('current-time-msg');
            msg.innerText = `Current Time (UTC+3): ${hours}:${mins < 10 ? '0'+mins : mins}`;

            // Logic for 14:00-14:10 and 17:00-17:10
            const isSession1 = (hours === 14 && mins <= 10);
            const isSession2 = (hours === 17 && mins <= 10);

            if (isSession1 || isSession2) {
                document.getElementById('status-dot').className = "status-indicator status-online";
                document.getElementById('trade-in-btn').disabled = false;
            } else {
                // For demo purposes, I will keep the button enabled, 
                // but in production, you would uncomment the next line:
                // document.getElementById('trade-in-btn').disabled = true;
            }
        }

        setInterval(checkSession, 1000);
        checkSession();
    </script>
</body>
</html>